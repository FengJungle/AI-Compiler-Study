# 1. 基本块（Basic Block）
基本块是满足下列条件的最大的连续的三地址指令序列  
- 控制流只能从基本块的第一个指令进入该块。也就是说，没有跳转到基本块中间或末尾指令的转移指令。
- 除了基本块的最后一个指令，控制流在离开基本块之前不会跳转或停机
## 基本块划分算法
- 输入：三地址指令序列
- 输出：输入序列对应的基本块列表，其中每个指令恰好被分配给一个基本块
- 方法：
    - 首先，确定指令序列中哪些指令是首指令(leaders)，即某个基本块的第一个指令
        - 指令序列的第一个三地址指令是一个首指令
        - 任意一个条件或无条件转移指令的目标指令是一个首指令
        - 紧跟在一个条件或无条件转移指令之后的指令是一个首指令
    - 然后，每个首指令对应的基本块包括了从它自己开始，直到下一个首指令(不含)或者指令序列结尾之间的所有指令

![](./Picture/44.%E5%9F%BA%E6%9C%AC%E5%9D%97%E5%88%92%E5%88%86.png)

## 流图（Flow Graphs）
流图的结点是一些基本块。从基本块B到基本块C之间有一条边当且仅当基本块C的第一个指令可能紧跟在B的最后一条指令之后执行。此时称B是C的前驱(predecessor) ，C是B的后继(successor)。


有两种方式可以确认这样的边：
- 有一个从B的结尾跳转到C的开头的条件或无条件跳转语句
- 按照原来的三地址语句序列中的顺序，C紧跟在之B后，且B的结尾不存在无条件跳转语句
 
![](./Picture/45.%E6%B5%81%E5%9B%BE.png)

# 2. 常用的代码优化方法
## 优化的分类
- 机器无关优化：针对中间代码
- 机器相关优化：针对目标代码
- 局部代码优化：单个基本块范围内的优化
- 全局代码优化：面向多个基本块的优化
## 常用的优化方法
- 删除公共子表达式
- 删除无用代码
- 常量合并
- 代码移动
- 强度削弱
- 删除归纳变量